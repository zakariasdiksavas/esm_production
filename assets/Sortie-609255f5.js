import{r as F,a2 as L,d as $,l as t,j as e,B as me,a3 as pe,bo as xe,a1 as ae,bp as d,V as X,h as Y,ab as C,ac as S,ad as B,ae as j,a as U,a6 as z,T as Z,at as se,Y as N,a7 as ee,F as R,k as J,S as ge}from"./index-b9aeea20.js";import{e as je,T as be,a as fe,b as K,c as x,d as ye,f as ve,g as A,G as h,u as E,S as O,h as V,B as te,E as oe}from"./moment-8bb476e3.js";import{E as Ce,P as Se,M as Be}from"./ModalDelete-e666945f.js";import{T as we,C as le}from"./TableRowsLoader-c4300d5c.js";import{A as Te}from"./AlertError-9fdceddd.js";import{D as qe}from"./Delete-49f664fd.js";import{u as re,c as ie,e as H,C as de,b as De,a as _,d as Q}from"./formik.esm-799b94e8.js";import{A as Me,a as We,F as Ie,b as Re}from"./fr-3088b82b.js";import{E as _e}from"./ExpandMore-6e3ae782.js";import{C as Ne}from"./CardActions-9d5c7725.js";import{D as ne}from"./DatePicker-05f47eec.js";import{C as Fe}from"./Container-7ef0f39f.js";import{M as ce}from"./ModalConfirm-37aae7aa.js";import{D as ue}from"./DateTimePicker-e1425ffd.js";import"./Tabs-029752cf.js";const Pe=F.memo(p=>{const b=JSON.parse(sessionStorage.getItem("user")),m=L();let{count:f=0,items:y=[],onDeselectAll:s,onDeselectOne:i,onSelectAll:P,onSelectOne:g,selected:n=[],isLoading:o,isError:M}=p;const[D,T]=F.useState(0),[v,q]=F.useState(25),{t:r,i18n:G}=$(),a=[r(t.sortie.vente),r(t.sortie.gratuit),r(t.sortie.accident),r(t.sortie.change)],l=u=>{Y.put("/outbound/delivered/",{id:u}).then(w=>{m(d.actions.setDeliver(w.data.id))})},k=(u,w)=>{T(w)},c=u=>{q(parseInt(u.target.value,10)),T(0)},W=y==null?void 0:y.slice(D*v,D*v+v);return e.jsxs(me,{sx:{position:"relative"},children:[e.jsx(je,{component:pe,children:e.jsxs(be,{sx:{minWidth:700},children:[e.jsx(fe,{children:e.jsxs(K,{children:[e.jsx(x,{children:r(t.client.title)}),e.jsx(x,{children:b!=null&&b.is_eleveur?r(t.batiment.title):r(t.fournisseur.title)}),e.jsx(x,{children:r(t.magazin.title)}),e.jsx(x,{children:r(t.sortie.eggType)}),e.jsx(x,{children:r(t.entrer.quantity)}),e.jsx(x,{children:r(t.sortie.typeDeSortie)}),e.jsxs(x,{children:[r(t.entrer.prix)," ",r(t.global.mad)]}),e.jsx(x,{children:r(t.entrer.date)}),e.jsx(x,{children:r(t.entrer.temps)}),e.jsx(x,{children:r(t.sortie.status)}),e.jsx(x,{})]})}),o?e.jsx(we,{rowsNum:10,cellNum:10}):e.jsx(ye,{children:W.length>0?W.map(u=>{let w=new Date(u.date),I={year:w.getFullYear(),month:`${w.getMonth()+1}`,day:`${w.getDate()}`};const he=new Intl.NumberFormat("en-US",{style:"currency",currency:"MAD"});return e.jsxs(K,{hover:!0,children:[e.jsxs(x,{children:[u.client_first_name," ",u.client_last_name]}),e.jsxs(x,{children:[u.eggsource_name," ",u.eggsource_lastname]}),e.jsx(x,{children:u.warehouse_name}),e.jsx(x,{children:u.eggclass_name}),e.jsx(x,{sx:{direction:"initial",whiteSpace:"nowrap"},children:u.quantity.toLocaleString("en-US").replaceAll(","," ")}),e.jsx(x,{children:a[u.type-1]}),e.jsx(x,{children:he.format(u.price).replaceAll(","," ").replace("MAD","")}),e.jsxs(x,{children:[I.day.padStart(2,0),"/",I.month.padStart(2,0),"/",I.year]}),e.jsx(x,{children:u.time.substring(0,5)}),e.jsxs(x,{children:[" ",e.jsx(xe,{onClick:()=>l(u.id),label:u.is_delivered?r(t.sortie.oui):r(t.sortie.non),color:u.is_delivered?"success":"error"})]}),e.jsxs(x,{children:[e.jsx(ae,{color:"warning",onClick:()=>{m(d.actions.setCurrentData(u)),m(d.actions.openCloseModalUpdate())},children:e.jsx(X,{children:e.jsx(Ce,{})})}),e.jsx(ae,{color:"error",onClick:()=>{m(d.actions.setCurrentData(u)),m(d.actions.openCloseModalDelete())},children:e.jsx(X,{children:e.jsx(qe,{})})})]})]},u.id)}):e.jsx(K,{children:e.jsx(x,{colSpan:11,sx:{textAlign:"center"},children:r(t.batiment.nothingToDisplay)})})})]})}),e.jsx(ve,{component:"div",count:f,onPageChange:k,onRowsPerPageChange:c,page:D,rowsPerPage:v,rowsPerPageOptions:[5,10,25],labelRowsPerPage:r(t.batiment.Lignes),labelDisplayedRows:({from:u,to:w,count:I})=>`${u}â€“${w} ${r(t.batiment.sur)} ${I}`}),M&&e.jsx(Te,{})]})});function ke({batiment:p,magazin:b,classList:m,typeList:f,clientList:y}){A.locale("fr");const{t:s,i18n:i}=$(),P=L(),g=JSON.parse(sessionStorage.getItem("user")),n=re({initialValues:{date1:null,date2:null,type:"",client:"",warehouse:"",option:"",eggsource:""},validationSchema:ie({date1:H().nullable().test("is-before-date2",s(t.global.date2Greather),function(o){const{date2:M}=this.parent;return o<=M}),date2:H().nullable().test("is-after-date1",s(t.global.date2Greather),function(o){const{date1:M}=this.parent;return o>=M})}),onSubmit:async(o,{resetForm:M,setErrors:D})=>{let T="";for(let v in o)if(o[v]!==""&&o[v]!==null){let q=new Date(o[v]),r=q.getFullYear()!==1970?`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}-${String(q.getDate()).padStart(2,"0")}`:o[v];T==""?T+=`?${v}=${r}`:T+=`&${v}=${r}`}if(o.date1!==null&&o.date2==null){D({date2:s(t.global.date2Required)});return}else if(o.date1==null&&o.date2!==null){D({date1:s(t.global.date1Required)});return}Y.get("/outbound/list/"+T).then(v=>{P(d.actions.fetchSortie(v.data))})},onReset:()=>{Y.get("/outbound/list/").then(o=>{P(d.actions.fetchSortie(o.data))})}});return F.useEffect(()=>{console.log(p)},[]),e.jsxs(Me,{defaultExpanded:!0,children:[e.jsx(We,{expandIcon:e.jsx(_e,{}),"aria-controls":"panel1-content",id:"panel1-header",children:e.jsxs("h3",{className:"font-bold text-lg",children:[e.jsx(Ie,{}),s(t.global.filter)]})}),e.jsx(Re,{children:e.jsx(de,{children:e.jsx(De,{children:e.jsxs("form",{noValidate:!0,onSubmit:n.handleSubmit,onReset:n.handleReset,children:[e.jsxs(h,{container:!0,gap:2,children:[e.jsx(h,{item:!0,xs:"2",children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,children:[e.jsx(S,{id:"batiment-id",children:g!=null&&g.is_eleveur?s(t.batiment.Nom):s(t.fournisseur.Nom)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"eggsource",onChange:n.handleChange,value:n.values.eggsource,label:g!=null&&g.is_eleveur?s(t.batiment.Nom):s(t.fournisseur.Nom),children:p==null?void 0:p.map(o=>e.jsxs(j,{value:o.id,children:[o.name," ",o.last_name]}))})]})}),e.jsx(h,{items:!0,xs:"2",children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,children:[e.jsx(S,{id:"batiment-id",children:s(t.magazin.Nom)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"warehouse",onChange:n.handleChange,value:n.values.warehouse,label:s(t.batiment.Nom),children:b==null?void 0:b.map(o=>e.jsx(j,{value:o.id,children:o.name}))})]})}),e.jsx(h,{items:!0,xs:"2",children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,children:[e.jsx(S,{id:"batiment-id",children:s(t.client.title)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"client",onChange:n.handleChange,value:n.values.client,label:"Type de payment",children:y==null?void 0:y.map(o=>e.jsxs(j,{value:o.id,children:[o.first_name," ",o.last_name]}))})]})}),e.jsx(h,{item:!0,xs:"2",children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(n.touched.option&&n.errors.option),children:[e.jsx(S,{id:"batiment-id",children:s(t.sortie.eggType)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"option",onChange:n.handleChange,value:n.values.option,label:s(t.sortie.eggType),children:m==null?void 0:m.map(o=>e.jsx(j,{value:o.id,children:o.value}))})]})}),e.jsx(h,{item:!0,xs:"2",children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,children:[e.jsx(S,{id:"batiment-id",children:s(t.sortie.typeDeSortie)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"type",onChange:n.handleChange,value:n.values.type,label:s(t.sortie.typeDeSortie),children:f==null?void 0:f.map(o=>e.jsx(j,{value:o.id,children:o.value}))})]})}),e.jsx(h,{item:!0,xs:2,children:e.jsx(ne,{value:n.values.date1,onChange:o=>n.setFieldValue("date1",o),onBlur:n.handleBlur,label:s(t.global.date1),name:"date1",slotProps:{textField:{variant:"outlined",error:!!(n.touched.date1&&n.errors.date1),helperText:n.touched.date1&&n.errors.date1}}})}),e.jsx(h,{item:!0,xs:2,children:e.jsx(ne,{value:n.values.date2,onChange:o=>n.setFieldValue("date2",o),onBlur:n.handleBlur,label:s(t.global.date2),name:"date2",slotProps:{textField:{variant:"outlined",error:!!(n.touched.date2&&n.errors.date2),helperText:n.touched.date2&&n.errors.date2}}})}),e.jsx(h,{item:!0,xs:7,children:e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(U,{variant:"contained",type:"reset",children:s(t.global.reset)}),e.jsx(U,{type:"submit",variant:"contained",children:s(t.global.filter)})]})})]}),e.jsx(Ne,{children:e.jsx("div",{className:"flex justify-end w-full"})})]})})})})]})}function Ae({batiment:p,magazin:b,classList:m,typeList:f,clientList:y}){const s=L(),{t:i,i18n:P}=$(),{sortie:g}=z(o=>o.sortie),n=E("sortie",V.getSortie);return F.useEffect(()=>{n.status=="success"&&s(d.actions.fetchSortie(n.data))},[n.status]),e.jsx(Fe,{maxWidth:"xl",children:e.jsxs(O,{spacing:4,children:[e.jsxs(O,{direction:"row",justifyContent:"space-between",spacing:4,children:[e.jsx(O,{spacing:1,children:e.jsx(Z,{variant:"h4",children:i(t.sortie.title)})}),e.jsx(O,{alignItems:"center",direction:"row",spacing:3,children:e.jsx(U,{startIcon:e.jsx(X,{children:e.jsx(Se,{})}),variant:"contained",onClick:()=>s(d.actions.openCloseModalAdd()),children:i(t.global.ajouter)})})]}),e.jsxs(de,{children:[e.jsx(ke,{batiment:p,magazin:b,classList:m,typeList:f,clientList:y}),e.jsx(Pe,{items:g,isLoading:n.isLoading,isError:n.isError,count:g.length,rowsPerPage:25})]})]})})}const $e=p=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:400,height:"auto",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,[p.breakpoints.down("md")]:{width:"95%",height:"90vh",overflow:"auto"}}),Ee=({batiment:p,magazin:b,classList:m,typeList:f,clientList:y})=>{A.locale("fr");const s=L(),{t:i,i18n:P}=$(),g=JSON.parse(sessionStorage.getItem("user")),{currentData:n,isModalUpdate:o,isConfirm:M}=z(l=>l.sortie),[D,T]=F.useState(),v=se(),q=ie({dateTime:H().required(i(t.sortie.dateTimeRequired)),eggsource:_().required(g!=null&&g.is_eleveur?i(t.sortie.batimentRequired):i(t.sortie.fournisseurRequired)),warehouse:_().required(i(t.sortie.magazinRequired)),option:_().required(i(t.sortie.optionRequired)),type:_().required(i(t.sortie.typeRequired)),client:_().required(i(t.sortie.clientRequired)),price:Q().required(i(t.sortie.prixRequired)),quantity:Q().required(i(t.sortie.quantityRequired))}),r=re({initialValues:{dateTime:"",type:"",client:"",warehouse:"",option:"",eggsource:"",price:0,quantity:0},validationSchema:q,onSubmit:async(l,{resetForm:k,setErrors:c})=>{console.log(l);let W={...l};W.date=A(D).format("YYYY-MM-DD"),W.time=A(D).format("LT").replace(" AM","").replace(" PM",""),Y.put("/outbound/update/",W).then(u=>{s(d.actions.editSortie(u.data)),s(d.actions.openCloseModalUpdate()),s(d.actions.openCloseConfirm()),N.success(i(t.sortie.toastUpdateSuccess)),k()}).catch(u=>{if(s(d.actions.openCloseConfirm()),u.response.data==2){N.error(i(t.sortie.outOfStock));return}else u.response.data==1?N.error(i(t.sortie.noStockExist)):N.error(i(t.sortie.toastError))})}}),G=async l=>{l.preventDefault();const k=await r.validateForm();Object.keys(k).length===0?s(d.actions.openCloseConfirm()):await r.submitForm()},a=()=>{r.handleSubmit()};return F.useEffect(()=>{r.setValues(n),T(new Date(`${n.date}T${n.time}`)),r.setFieldValue("dateTime",new Date,!1)},[n]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{open:o,onClose:()=>s(d.actions.openCloseModalUpdate()),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(te,{sx:$e(v),children:[e.jsxs(O,{direction:"row",justifyContent:"space-between",alignItems:"center",style:{marginBottom:"20px"},children:[e.jsx(Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:i(t.sortie.update)}),e.jsx("div",{className:"cursor-pointer",onClick:()=>s(d.actions.openCloseModalUpdate()),children:e.jsx(le,{})})]}),e.jsxs("form",{noValidate:!0,onSubmit:l=>G(l),children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.eggsource&&r.errors.eggsource),children:[e.jsx(S,{id:"batiment-id",children:g!=null&&g.is_eleveur?i(t.batiment.Nom):i(t.fournisseur.Nom)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"eggsource",onChange:r.handleChange,value:r.values.eggsource,label:g!=null&&g.is_eleveur?i(t.batiment.Nom):i(t.fournisseur.Nom),children:p.length>0?p.map(l=>e.jsxs(j,{value:l.id,children:[l.name," ",l.last_name]})):e.jsx(j,{children:i(t.batiment.nothingToDisplay)})}),r.touched.eggsource&&r.errors.eggsource&&e.jsx(R,{children:r.errors.eggsource})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.warehouse&&r.errors.warehouse),children:[e.jsx(S,{id:"batiment-id",children:i(t.magazin.Nom)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"warehouse",onChange:r.handleChange,value:r.values.warehouse,label:i(t.batiment.Nom),children:b.length>0?b.map(l=>e.jsx(j,{value:l.id,children:l.name})):e.jsx(j,{children:i(t.batiment.nothingToDisplay)})}),r.touched.warehouse&&r.errors.warehouse&&e.jsx(R,{children:r.errors.warehouse})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.client&&r.errors.client),children:[e.jsx(S,{id:"batiment-id",children:i(t.client.title)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"client",onChange:r.handleChange,value:r.values.client,label:i(t.client.title),children:y.length>0?y.map(l=>e.jsxs(j,{value:l.id,children:[l.first_name," ",l.last_name]})):e.jsx(j,{children:i(t.batiment.nothingToDisplay)})}),r.touched.client&&r.errors.client&&e.jsx(R,{children:r.errors.client})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.option&&r.errors.option),children:[e.jsx(S,{id:"batiment-id",children:i(t.sortie.eggType)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"option",onChange:r.handleChange,value:r.values.option,label:i(t.sortie.eggType),children:m.map(l=>e.jsx(j,{value:l.id,children:l.value}))}),r.touched.option&&r.errors.option&&e.jsx(R,{children:r.errors.option})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.type&&r.errors.type),children:[e.jsx(S,{id:"batiment-id",children:i(t.sortie.typeDeSortie)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"type",onChange:r.handleChange,value:r.values.type,label:i(t.sortie.typeDeSortie),children:f.map(l=>e.jsx(j,{value:l.id,children:l.value}))}),r.touched.type&&r.errors.type&&e.jsx(R,{children:r.errors.type})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(J,{id:"outlined-basic",label:i(t.entrer.quantity),variant:"outlined",fullWidth:!0,type:"number",onBlur:r.handleBlur,onChange:r.handleChange,value:r.values.quantity,error:!!(r.touched.quantity&&r.errors.quantity),helperText:r.touched.quantity&&r.errors.quantity,name:"quantity",style:{marginBottom:"15px"}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(J,{id:"outlined-basic",label:i(t.entrer.prix),variant:"outlined",fullWidth:!0,type:"number",onBlur:r.handleBlur,onChange:r.handleChange,value:r.values.price,error:!!(r.touched.price&&r.errors.price),helperText:r.touched.price&&r.errors.price,name:"price",style:{marginBottom:"15px"}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(ue,{id:"outlined-basic",label:i(t.entrer.temps)+" "+i(t.entrer.date),variant:"outlined",onBlur:r.handleBlur,fullWidth:!0,name:"dateTime",value:D,onChange:l=>{r.setFieldValue("dateTime",l,!0),T(l)},slotProps:{textField:{variant:"outlined",error:!!(r.touched.dateTime&&r.errors.dateTime),helperText:!!(r.touched.dateTime&&r.errors.dateTime)}},sx:{marginBottom:"15px",width:"100%"}})})]}),e.jsx(U,{fullWidth:!0,size:"large",sx:{mt:2},type:"submit",variant:"contained",children:i(t.global.modifier)})]})]})}),e.jsx(ce,{confirmed:a,cancel:()=>s(d.actions.openCloseConfirm()),isConfirm:M})]})},Ve=Ee,Oe=p=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:600,height:"auto",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,[p.breakpoints.down("md")]:{width:"95%",height:"90vh",overflow:"auto"}}),Ye=({batiment:p,magazin:b,classList:m,typeList:f,clientList:y})=>{A.locale("fr");const s=L(),{t:i,i18n:P}=$(),g=se(),n=JSON.parse(sessionStorage.getItem("user")),[o,M]=F.useState(0),{sortie:D,isModalAdd:T,isConfirm:v}=z(c=>c.sortie),[q,r]=F.useState(),G=ie({dateTime:H().required(i(t.sortie.dateTimeRequired)),eggsource:_().required(n!=null&&n.is_eleveur?i(t.sortie.batimentRequired):i(t.sortie.fournisseurRequired)),warehouse:_().required(i(t.sortie.magazinRequired)),option:_().required(i(t.sortie.optionRequired)),type:_().required(i(t.sortie.typeRequired)),client:_().required(i(t.sortie.clientRequired)),price:Q().required(i(t.sortie.prixRequired)),quantity:Q().required(i(t.sortie.quantityRequired))}),a=re({initialValues:{dateTime:"",type:"",client:"",warehouse:"",option:"",eggsource:"",price:0,quantity:0},validationSchema:G,onSubmit:async(c,{resetForm:W,setErrors:u})=>{let w={...c};w.date=A(q).format("YYYY-MM-DD"),w.time=A(q).format("LT").replace(" AM","").replace(" PM",""),Y.post("/outbound/add/",w).then(I=>{s(d.actions.addSortie(I.data)),s(d.actions.openCloseModalAdd()),s(d.actions.openCloseConfirm()),N.success(i(t.sortie.toastAddSuccess)),W()}).catch(I=>{if(s(d.actions.openCloseConfirm()),s(d.actions.openCloseConfirm()),I.response.data==2){N.error(i(t.sortie.outOfStock));return}else I.response.data==1?N.error(i(t.sortie.noStockExist)):N.error(i(t.sortie.toastError))})}}),l=async c=>{c.preventDefault();const W=await a.validateForm();Object.keys(W).length===0?s(d.actions.openCloseConfirm()):await a.submitForm()},k=()=>{a.handleSubmit()};return F.useEffect(()=>{M(a.values.price*a.values.quantity)},[a.values.price,a.values.quantity]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{open:T,onClose:()=>s(d.actions.openCloseModalAdd()),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(te,{sx:Oe(g),children:[e.jsxs(O,{direction:"row",justifyContent:"space-between",alignItems:"center",style:{marginBottom:"20px"},children:[e.jsx(Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:i(t.sortie.add)}),e.jsx("div",{className:"cursor-pointer",onClick:()=>s(d.actions.openCloseModalAdd()),children:e.jsx(le,{})})]}),e.jsxs("form",{noValidate:!0,onSubmit:c=>l(c),children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(a.touched.eggsource&&a.errors.eggsource),children:[e.jsx(S,{id:"batiment-id",children:n!=null&&n.is_eleveur?i(t.batiment.Nom):i(t.fournisseur.Nom)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:a.handleBlur,fullWidth:!0,name:"eggsource",onChange:a.handleChange,value:a.values.eggsource,label:n!=null&&n.is_eleveur?i(t.batiment.Nom):i(t.fournisseur.Nom),children:p.length>0?p.map(c=>e.jsxs(j,{value:c.id,children:[c.name," ",c.last_name]})):e.jsx(j,{children:i(t.batiment.nothingToDisplay)})}),a.touched.eggsource&&a.errors.eggsource&&e.jsx(R,{children:a.errors.eggsource})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(a.touched.warehouse&&a.errors.warehouse),children:[e.jsx(S,{id:"batiment-id",children:i(t.magazin.Nom)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:a.handleBlur,fullWidth:!0,name:"warehouse",onChange:a.handleChange,value:a.values.warehouse,label:i(t.batiment.Nom),children:b.length>0?b.map(c=>e.jsx(j,{value:c.id,children:c.name})):e.jsx(j,{children:i(t.batiment.nothingToDisplay)})}),a.touched.warehouse&&a.errors.warehouse&&e.jsx(R,{children:a.errors.warehouse})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(a.touched.client&&a.errors.client),children:[e.jsx(S,{id:"batiment-id",children:i(t.client.title)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:a.handleBlur,fullWidth:!0,name:"client",onChange:a.handleChange,value:a.values.client,label:i(t.client.title),children:y.length>0?y.map(c=>e.jsxs(j,{value:c.id,children:[c.first_name," ",c.last_name]})):e.jsx(j,{children:i(t.batiment.nothingToDisplay)})}),a.touched.client&&a.errors.client&&e.jsx(R,{children:a.errors.client})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(a.touched.option&&a.errors.option),children:[e.jsx(S,{id:"batiment-id",children:i(t.sortie.eggType)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:a.handleBlur,fullWidth:!0,name:"option",onChange:a.handleChange,value:a.values.option,label:i(t.sortie.eggType),children:m.map(c=>e.jsx(j,{value:c.id,children:c.value}))}),a.touched.option&&a.errors.option&&e.jsx(R,{children:a.errors.option})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(C,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(a.touched.type&&a.errors.type),children:[e.jsx(S,{id:"batiment-id",children:i(t.sortie.typeDeSortie)}),e.jsx(B,{labelId:"batiment-id",id:"demo-simple-select",onBlur:a.handleBlur,fullWidth:!0,name:"type",onChange:a.handleChange,value:a.values.type,label:i(t.sortie.typeDeSortie),children:f.map(c=>e.jsx(j,{value:c.id,children:c.value}))}),a.touched.type&&a.errors.type&&e.jsx(R,{children:a.errors.type})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(J,{id:"outlined-basic",label:i(t.entrer.quantity),variant:"outlined",fullWidth:!0,type:"number",onBlur:a.handleBlur,onChange:a.handleChange,value:a.values.quantity,error:!!(a.touched.quantity&&a.errors.quantity),helperText:a.touched.quantity&&a.errors.quantity,name:"quantity",style:{marginBottom:"15px"}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(J,{id:"outlined-basic",label:i(t.entrer.prix),variant:"outlined",fullWidth:!0,type:"number",onBlur:a.handleBlur,onChange:a.handleChange,value:a.values.price,error:!!(a.touched.price&&a.errors.price),helperText:a.touched.price&&a.errors.price,name:"price",style:{marginBottom:"15px"}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(ue,{id:"outlined-basic",label:i(t.entrer.temps)+" "+i(t.entrer.date),variant:"outlined",onBlur:a.handleBlur,fullWidth:!0,name:"dateTime",value:q,onChange:c=>{a.setFieldValue("dateTime",c,!0),r(c)},slotProps:{textField:{variant:"outlined",error:!!(a.touched.dateTime&&a.errors.dateTime),helperText:!!(a.touched.dateTime&&a.errors.dateTime)}},sx:{marginBottom:"15px",width:"100%"}})}),e.jsx(h,{xs:12,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Montant a payer: "}),o]})})]}),e.jsx(U,{fullWidth:!0,size:"large",sx:{mt:2},type:"submit",variant:"contained",children:i(t.global.ajouter)})]})]})}),e.jsx(ce,{confirmed:k,cancel:()=>s(d.actions.openCloseConfirm()),isConfirm:v})]})},Le=Ye;function Ue(){const{currentData:p,isModalDelete:b}=z(i=>i.sortie),m=L(),{t:f,i18n:y}=$();JSON.parse(sessionStorage.getItem("user"));const s=()=>{Y.delete(`/outbound/delete/${p.id}`).then(i=>{m(d.actions.deleteSortie()),m(d.actions.openCloseModalDelete()),N.success(f(t.sortie.toastDeleteSuccess))}).catch(i=>{m(d.actions.openCloseModalDelete()),N.error(f(t.sortie.toastError))})};return e.jsx(ee,{open:b,onClose:()=>m(d.actions.openCloseModalDelete()),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:e.jsx(Be,{title:f(t.sortie.deleteTitle),message:f(t.sortie.deleteDescription),deleteFn:s,cancel:()=>m(d.actions.openCloseModalDelete())})})}function ze(){const{isModalAdd:p,isModalUpdate:b}=z(P=>P.sortie),m=E("batimens",V.getBatimentSelect),f=E("magazins",V.getWarehouseSelect),y=E("classLists",V.getClass),s=E("typeList",V.typeLists),i=E("clientLists",V.getClientSelect);return e.jsxs(te,{component:"main",sx:{flexGrow:1,py:8},children:[e.jsx(oe,{children:e.jsx(Ae,{batiment:m.data,magazin:f.data,classList:y.data,typeList:s.data,clientList:i.data})}),p&&e.jsx(Le,{batiment:m.data,magazin:f.data,classList:y.data,typeList:s.data,clientList:i.data}),b&&e.jsx(Ve,{batiment:m.data,magazin:f.data,classList:y.data,typeList:s.data,clientList:i.data}),e.jsx(Ue,{})]})}function lt(){const{t:p,i18n:b}=$();return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:`ESM | ${p(t.nav.sortie)}`}),e.jsx(oe,{children:e.jsx(ze,{})})]})}export{lt as default};
