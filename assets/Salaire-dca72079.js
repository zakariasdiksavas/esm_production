import{aa as M,aA as Ee,ae as L,d as T,r as j,j as e,af as J,a4 as Fe,a9 as w,l as s,a as $,h as K,bF as i,a5 as y,au as we,T as ae,B as Ae,ab as he,aF as Ue,a2 as Y,as as Me,aj as A,ak as _,al as U,am as C,k as ee,F as V}from"./index-5b79c039.js";import{B as q,e as xe,T as ve,a as ge,b as k,c as g,d as Ce,f as ie,G as D,u as oe,S as H,h as le,E as fe}from"./moment-864131f4.js";import{E as Te,P as Re,M as De}from"./ModalDelete-04bd8acd.js";import{u as Ie,C as be,T as Ge}from"./index-be556e9b.js";import{C as X,T as Le}from"./TableRowsLoader-23cb4167.js";import{E as We}from"./Eye-655a27ed.js";import{A as Be,T as Ne,K as ke,a as Ye}from"./KeyboardArrowUp-c6409d2a.js";import{A as He}from"./AlertError-96b329d4.js";import{D as Ve}from"./DeleteOutlineOutlined-32598299.js";import{u as de,c as ce,e as je,C as Se,b as $e,d as se}from"./formik.esm-f8b1f355.js";import"./fr-4efeb1d7.js";import{D as te}from"./DatePicker-9add668e.js";import{M as ye}from"./ModalConfirm-575c2085.js";const Ke=u=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,p:4,[u.breakpoints.down("md")]:{width:"95%"}}),ze=["application/pdf","image/jpg","image/jpeg","image/png"];function qe({isModalUpload:u,close:l,isFournisseur:r}){var Z;const m=M(),x=Ee(),{currentData:t}=L(v=>v.salaire),{t:o,i18n:h}=T(),[n,a]=j.useState([]),[b,p]=j.useState(4-((Z=t==null?void 0:t.expenses_proof)==null?void 0:Z.length)-n.length),[c,S]=j.useState(!1),{acceptedFiles:R,getRootProps:O,getInputProps:W}=Ie({onDrop:(v,f)=>{var E;if(f.length>0){if(f[0].errors[0].code=="too-many-files"){y.error(o(s.paiment.uploadLimitFile)+` ${4-((E=t==null?void 0:t.expenses_proof)==null?void 0:E.length)}`);return}else if(f[0].errors[0].code=="file-invalid-type"){y.error(o(s.paiment.fileSupported));return}y.error(f[0].errors[0].message)}a(B=>[...B,...v])},multiple:!0,maxFiles:b,validator:ne,accept:{"application/pdf":[],"image/jpeg":[],"image/jpg":[],"image/png":[]}}),P=()=>{S(!0);const v=new FormData;v.append("id",t.id),n.map(f=>{v.append("files",f)}),K.post("/employeewage/proof/add/",v).then(f=>{m(i.actions.addProofSalaire(f.data)),y.success(o(s.paiment.toastUploadFile)),S(!1),l(),a([])})},me=v=>{const f=n.findIndex(B=>B.path==v),E=n.filter((B,I)=>I!==f);a(E)};function ne(v){var E;if(!ze.includes(v.type))return{code:"extension-supported",message:o(s.paiment.fileSupported)};const f=5*1024*1024;return v.size>f?{code:"max-size",message:o(s.paiment.uploadMaxSize)}:b<=0?{code:"max-file",message:`${o(s.paiment.uploadLimitFile)} ${4-((E=t==null?void 0:t.expenses_proof)==null?void 0:E.length)}`}:null}return j.useEffect(()=>{var v;n.length>0&&p(4-((v=t==null?void 0:t.expenses_proof)==null?void 0:v.length)-n.length)},[n.length]),e.jsx(e.Fragment,{children:e.jsx(J,{open:u,onClose:l,children:e.jsxs(q,{sx:Ke(x),children:[e.jsxs(q,{sx:{position:"absolute",right:0,top:0},children:[c&&e.jsx(Fe,{}),e.jsx(w,{onClick:l,children:e.jsx(X,{})})]}),e.jsx("h3",{className:"text-center font-semibold text-lg",children:o(s.paiment.uploadTitle)}),e.jsxs("div",{className:"flex flex-col items-center my-4 border-2 border-dashed border-purple-500 p-4",...O(),children:[e.jsx("input",{...W()}),e.jsx(be,{color:"primary",fontSize:"large"}),e.jsx("p",{children:o(s.paiment.uploadTitle)}),e.jsxs("p",{children:[o(s.paiment.uploadMessage)," PNG, JPG, JPEG, PDF"]})]}),e.jsx("div",{children:n.map((v,f)=>e.jsxs("p",{children:[v.path," ",e.jsx(w,{onClick:()=>me(v.path),children:e.jsx(X,{color:"error"})})]},f))}),e.jsx("div",{className:"flex justify-end",children:e.jsx($,{onClick:P,variant:"contained",color:"primary",children:o(s.paiment.upload)})})]})})})}function Xe({close:u,isPreview:l,file:r}){const[m,x]=j.useState(null);return j.useEffect(()=>(console.log(r),(async()=>{try{console.log(r.file);const o=await K.get(r.file,{responseType:"blob"}),h=URL.createObjectURL(o.data);console.log(h),x(h)}catch(o){console.error("Error fetching PDF:",o)}})(),()=>{m&&URL.revokeObjectURL(m)}),[]),e.jsxs(we,{fullScreen:!0,open:l,children:[e.jsx(Be,{sx:{position:"relative"},children:e.jsxs(Ne,{children:[e.jsx(w,{edge:"start",color:"inherit","aria-label":"close",onClick:()=>u(),children:e.jsx(X,{})}),e.jsx(ae,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Preview File"})]})}),e.jsx("iframe",{src:m,height:"100%"})]})}const Je=j.memo(u=>{const l=M();let{count:r=0,items:m=[],onDeselectAll:x,onDeselectOne:t,onSelectAll:o,onSelectOne:h,selected:n=[],isLoading:a,isError:b}=u;const[p,c]=j.useState(1),[S,R]=j.useState(!1),[O,W]=j.useState(25),{t:P,i18n:me}=T(),[ne,Z]=j.useState({}),[v,f]=j.useState(!1),[E,B]=j.useState();j.useState(),j.useState(null);const I=j.useRef(null),_e=d=>{Z(F=>({...F,[d]:!F[d]}))},re=(d,F)=>{const G=m.filter(z=>z.id==d);l(i.actions.setCurrentData(G[0])),F=="update"?l(i.actions.openCloseModalUpdate()):F=="delete"?l(i.actions.openCloseModalDelete()):R(!0)},ue=()=>{const d=I.current;d&&d.scrollHeight===d.scrollTop+d.clientHeight&&!a&&c(G=>G+1)};j.useEffect(()=>(I.current&&I.current.addEventListener("scroll",ue),()=>{I.current&&I.current.removeEventListener("scroll",ue)}),[a]);const N=m==null?void 0:m.slice(0,p*O);return e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{sx:{position:"relative"},children:[e.jsx(xe,{component:he,children:e.jsxs(ve,{sx:{minWidth:700},children:[e.jsx(ge,{children:e.jsxs(k,{children:[e.jsx(g,{align:"left"}),e.jsx(g,{children:P(s.employee.salarie)}),e.jsxs(g,{children:[P(s.paiment.amount)," ",P(s.global.mad)]}),e.jsx(g,{children:P(s.entrer.date)}),e.jsx(g,{children:P(s.salaire.periode)}),e.jsx(g,{sx:{width:"5%"},children:P(s.salaire.observation)}),e.jsx(g,{})]})}),a?e.jsx(Le,{rowsNum:10}):e.jsx(Ce,{children:(N==null?void 0:N.length)>0?N==null?void 0:N.map(d=>{var pe;const F=ne[d.id]||!1;let G=new Date(d.date),z={year:G.getFullYear(),month:`${G.getMonth()+1}`,day:`${G.getDate()}`};const Oe=new Intl.NumberFormat("en-US",{style:"currency",currency:"MAD"});return e.jsxs(e.Fragment,{children:[e.jsxs(k,{hover:!0,children:[e.jsx(g,{sx:{width:"5%"},children:d.wages_proof.length!==0&&e.jsx(w,{"aria-label":"expand row",size:"small",onClick:()=>_e(d.id),children:F?e.jsx(ke,{}):e.jsx(Ye,{})})}),e.jsxs(g,{children:[d.first_name," ",d.last_name]}),e.jsx(g,{sx:{direction:"initial",whiteSpace:"nowrap"},children:Oe.format(d.amount).replaceAll(","," ").replace("MAD","")}),e.jsxs(g,{children:[" ",z.day.padStart(2,0),"/",z.month.padStart(2,0),"/",z.year]}),e.jsx(g,{children:d.year!==null&&d.month!==null?`${d.month}`.padStart("2","0")+"/"+d.year:""}),e.jsx(g,{children:e.jsx(Ue,{title:d.observation,children:d.observation?d.observation.length>10?((pe=d.observation)==null?void 0:pe.slice(0,10))+"...":d.observation:""})}),e.jsx(g,{children:d.is_active&&e.jsxs(e.Fragment,{children:[e.jsx(w,{color:"warning",onClick:()=>re(d.id,"update"),children:e.jsx(Y,{children:e.jsx(Te,{})})}),e.jsx(w,{color:"error",onClick:()=>re(d.id,"delete"),children:e.jsx(Y,{children:e.jsx(Ve,{})})}),d.wages_proof.length!==4&&e.jsx(w,{color:"success",onClick:()=>re(d.id,"upload"),children:e.jsx(Y,{children:e.jsx(be,{})})})]})})]},d.id),e.jsx(k,{children:e.jsx(g,{style:{paddingBottom:0,paddingTop:0},colSpan:8,children:e.jsx(Me,{in:F,timeout:"auto",unmountOnExit:!0,children:e.jsx(xe,{sx:{width:"100%"},component:he,children:e.jsxs(ve,{sx:{width:"100%"},children:[e.jsx(ge,{children:e.jsxs(k,{children:[e.jsx(g,{children:P(s.paiment.fileName)}),e.jsx(g,{})]})}),e.jsx(Ce,{children:d.wages_proof.map((Q,Pe)=>e.jsxs(k,{children:[e.jsx(g,{children:Q.file.replace("http://192.168.1.100:80/api".replace("/api","")+"/uploads/","")}),e.jsxs(g,{children:[" ",e.jsx(w,{color:"inherit",onClick:()=>{l(i.actions.openCloseConfirmDeleteProof()),l(i.actions.setCurrentData({id:d.id,idFile:Q.id}))},children:e.jsx(Y,{children:e.jsx(Ge,{})})}),e.jsx(w,{color:"secondary",onClick:()=>{B({file:Q.file,extension:Q.extension}),f(!0)},children:e.jsx(Y,{children:e.jsx(We,{})})})]})]},Pe))})]})})})})})]})}):e.jsx(k,{children:e.jsx(g,{colSpan:8,sx:{textAlign:"center"},children:P(s.batiment.nothingToDisplay)})})})]})}),b&&e.jsx(He,{})]}),S&&e.jsx(qe,{isModalUpload:S,close:()=>R(!1)}),v&&e.jsx(Xe,{isPreview:v,close:()=>f(!1),file:E})]})});function Ze({employee:u}){ie.locale("fr");const{t:l,i18n:r}=T(),m=M(),x=new Date,t=de({initialValues:{date1:null,date2:null,employee:""},validationSchema:ce({date1:je().nullable().test("is-before-date2",l(s.global.date2Greather),function(o){const{date2:h}=this.parent;return o<=h}),date2:je().nullable().test("is-after-date1",l(s.global.date2Greather),function(o){const{date1:h}=this.parent;return o>=h})}),onSubmit:async(o,{resetForm:h,setErrors:n})=>{let a="";for(let b in o)if(o[b]!==""&&o[b]!==null){let p=new Date(o[b]),c=p.getFullYear()!==1970?`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}-${String(p.getDate()).padStart(2,"0")}`:o[b];a==""?a+=`?${b}=${c}`:a+=`&${b}=${c}`}m(i.actions.setLink(a))},onReset:()=>{m(i.actions.setLink(""))}});return e.jsx(Se,{children:e.jsx($e,{children:e.jsx("form",{noValidate:!0,onSubmit:t.handleSubmit,onReset:t.handleReset,children:e.jsxs(D,{container:!0,alignItems:"center",gap:2,children:[e.jsx(D,{item:!0,xs:12,md:3.8,children:e.jsxs(A,{fullWidth:!0,children:[e.jsx(_,{id:"batiment-id",size:"small",children:l(s.employee.title)}),e.jsx(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:t.handleBlur,fullWidth:!0,size:"small",name:"employee",onChange:t.handleChange,value:t.values.employee,label:l(s.employee.title),children:u==null?void 0:u.map(o=>e.jsxs(C,{value:o.id,children:[o.first_name," ",o.last_name]}))})]})}),e.jsx(D,{item:!0,xs:12,md:3.8,children:e.jsxs(A,{fullWidth:!0,error:!!(t.touched.type&&t.errors.type),children:[e.jsx(_,{id:"batiment-id",size:"small",children:l(s.salaire.month)}),e.jsx(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:t.handleBlur,fullWidth:!0,size:"small",name:"month",onChange:t.handleChange,value:t.values.month,label:l(s.salaire.month),children:[...Array(12)].map((o,h)=>e.jsx(C,{value:h+1,children:h+1}))}),t.touched.month&&t.errors.month&&e.jsx(FormHelperText,{children:t.errors.month})]})}),e.jsx(D,{item:!0,xs:12,md:3.8,children:e.jsxs(A,{fullWidth:!0,error:!!(t.touched.type&&t.errors.type),children:[e.jsx(_,{id:"batiment-id",size:"small",children:l(s.salaire.year)}),e.jsxs(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:t.handleBlur,fullWidth:!0,size:"small",name:"year",onChange:t.handleChange,value:t.values.year,label:l(s.salaire.year),children:[e.jsx(C,{value:x.getFullYear()-1,children:x.getFullYear()-1}),e.jsx(C,{value:x.getFullYear(),children:x.getFullYear()}),e.jsx(C,{value:x.getFullYear()+1,children:x.getFullYear()+1}),e.jsx(C,{value:x.getFullYear()+2,children:x.getFullYear()+2})]}),t.touched.year&&t.errors.year&&e.jsx(FormHelperText,{children:t.errors.year})]})}),e.jsx(D,{item:!0,xs:12,md:2,sm:12,children:e.jsx(te,{value:t.values.date1,onChange:o=>t.setFieldValue("date1",o),onBlur:t.handleBlur,label:l(s.global.date1),name:"date",sx:{width:"100%"},slotProps:{textField:{variant:"outlined",size:"small",error:!!(t.touched.date1&&t.errors.date1),helperText:t.touched.date1&&t.errors.date1}}})}),e.jsx(D,{item:!0,xs:12,md:2,sm:12,children:e.jsx(te,{value:t.values.date2,onChange:o=>t.setFieldValue("date2",o),onBlur:t.handleBlur,label:l(s.global.date2),name:"date",sx:{width:"100%"},slotProps:{textField:{size:"small",variant:"outlined",error:!!(t.touched.date2&&t.errors.date2),helperText:t.touched.date2&&t.errors.date2}}})}),e.jsxs(D,{item:!0,container:!0,xs:12,md:12,sm:12,gap:2,sx:{alignContent:"center",justifyContent:"end"},children:[e.jsx(D,{items:!0,children:e.jsx($,{variant:"contained",type:"reset",children:l(s.global.reset)})}),e.jsx(D,{items:!0,children:e.jsx($,{type:"submit",variant:"contained",children:l(s.global.filter)})})]})]})})})})}function Qe(){const u=M(),{t:l,i18n:r}=T(),{salaire:m,link:x}=L(h=>h.salaire),t=oe(["salaire",x],()=>le.fetchSalaire(x)),o=oe("employee",le.fetchOeuvreList);return j.useEffect(()=>{t.status=="success"&&u(i.actions.fetchSalaire(t.data))},[t.status,x]),e.jsxs(H,{spacing:4,children:[e.jsxs(H,{direction:"row",justifyContent:"space-between",spacing:4,children:[e.jsx(H,{spacing:1,children:e.jsx(ae,{variant:"h4",children:l(s.salaire.title)})}),e.jsx(H,{alignItems:"center",direction:"row",spacing:3,children:e.jsx($,{startIcon:e.jsx(Y,{children:e.jsx(Re,{})}),variant:"contained",onClick:()=>u(i.actions.openCloseModalAdd()),children:l(s.global.ajouter)})})]}),e.jsxs(Se,{children:[e.jsx(Ze,{employee:o.data}),e.jsx(Je,{items:m,count:m.length,rowsPerPage:25,isLoading:t.isLoading,isError:t.isError})]})]})}const es={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function ss({employee:u}){const l=M(),{t:r,i18n:m}=T(),{currentData:x,isModalUpdate:t,isConfirm:o}=L(c=>c.salaire),h=new Date,n=ce({amount:se().required(r(s.paiment.amountRequired)),employee:se().required(r(s.salaire.employeeRequired))}),a=de({initialValues:{amount:0,observation:null,employee:"",date:new Date,month:"",year:""},validationSchema:n,onSubmit:async(c,{resetForm:S,setErrors:R})=>{const O={...c};O.date=ie(c.date).format("YYYY-MM-DD"),K.put("/employeewage/update/",O).then(W=>{l(i.actions.editSalaire(W.data)),l(i.actions.openCloseModalUpdate()),l(i.actions.openCloseConfirm()),y.success(r(s.salaire.toastUpdateSuccess)),S()}).catch(W=>{console.log(W),l(i.actions.openCloseConfirm()),y.error(r(s.global.toastError))})}}),b=async c=>{c.preventDefault();const S=await a.validateForm();Object.keys(S).length===0?l(i.actions.openCloseConfirm()):await a.submitForm()},p=()=>{a.handleSubmit()};return j.useEffect(()=>{const c={...x};c.date=new Date(c.date),a.setValues(c)},[]),e.jsxs(e.Fragment,{children:[e.jsx(J,{open:t,onClose:()=>l(i.actions.openCloseModalUpdate()),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(q,{sx:es,children:[e.jsxs(H,{direction:"row",justifyContent:"space-between",alignItems:"center",style:{marginBottom:"20px"},children:[e.jsx(ae,{id:"modal-modal-title",variant:"h6",component:"h2",children:r(s.salaire.updateTitle)}),e.jsx("div",{className:"cursor-pointer",onClick:()=>l(i.actions.openCloseModalUpdate()),children:e.jsx(X,{})})]}),e.jsxs("form",{noValidate:!0,onSubmit:c=>b(c),children:[e.jsx(ee,{id:"outlined-basic",label:r(s.paiment.amount),variant:"outlined",onBlur:a.handleBlur,fullWidth:!0,type:"number",name:"amount",onChange:a.handleChange,value:a.values.amount,error:!!(a.touched.amount&&a.errors.amount),helperText:a.touched.amount&&a.errors.amount,style:{marginBottom:"15px"}}),e.jsx(ee,{id:"outlined-basic",label:r(s.salaire.observation),variant:"outlined",onBlur:a.handleBlur,fullWidth:!0,multiline:!0,maxRows:4,name:"observation",onChange:a.handleChange,value:a.values.observation,error:!!(a.touched.observation&&a.errors.observation),helperText:a.touched.observation&&a.errors.observation,style:{marginBottom:"15px"}}),e.jsxs(A,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(a.touched.employee&&a.errors.employee),children:[e.jsx(_,{id:"batiment-id",error:!!(a.touched.employee&&a.errors.employee),children:r(s.employee.title)}),e.jsx(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:a.handleBlur,fullWidth:!0,name:"employee",onChange:a.handleChange,value:a.values.employee,label:r(s.employee.title),error:!!(a.touched.employee&&a.errors.employee),children:u.length>0?u.map(c=>e.jsxs(C,{value:c.id,children:[c.first_name," ",c.last_name]})):e.jsx(C,{children:r(s.batiment.nothingToDisplay)})}),a.touched.employee&&a.errors.employee&&e.jsx(V,{children:a.errors.employee})]}),e.jsx(te,{label:r(s.entrer.date),value:a.values.date,onChange:c=>a.setFieldValue("date",c),onBlur:a.handleBlur,name:"date",sx:{width:"100%"}}),e.jsx(D,{xs:12,mt:.8,mb:.9,children:e.jsx(_,{children:r(s.salaire.periode)})}),e.jsxs(D,{container:!0,spacing:2,children:[e.jsx(D,{item:!0,xs:6,children:e.jsxs(A,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(a.touched.type&&a.errors.type),children:[e.jsx(_,{id:"batiment-id",children:r(s.salaire.month)}),e.jsx(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:a.handleBlur,fullWidth:!0,name:"month",onChange:a.handleChange,value:a.values.month,label:r(s.salaire.month),children:[...Array(12)].map((c,S)=>e.jsx(C,{value:S+1,children:S+1}))}),a.touched.month&&a.errors.month&&e.jsx(V,{children:a.errors.month})]})}),e.jsx(D,{item:!0,xs:6,children:e.jsxs(A,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(a.touched.type&&a.errors.type),children:[e.jsx(_,{id:"batiment-id",children:r(s.salaire.year)}),e.jsxs(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:a.handleBlur,fullWidth:!0,name:"year",onChange:a.handleChange,value:a.values.year,label:r(s.salaire.year),children:[e.jsx(C,{value:h.getFullYear()-1,children:h.getFullYear()-1}),e.jsx(C,{value:h.getFullYear(),children:h.getFullYear()}),e.jsx(C,{value:h.getFullYear()+1,children:h.getFullYear()+1}),e.jsx(C,{value:h.getFullYear()+2,children:h.getFullYear()+2})]}),a.touched.year&&a.errors.year&&e.jsx(V,{children:a.errors.year})]})})]}),e.jsx($,{fullWidth:!0,size:"large",sx:{mt:2},type:"submit",variant:"contained",children:r(s.global.modifier)})]})]})}),e.jsx(ye,{confirmed:p,cancel:()=>l(i.actions.openCloseConfirm()),isConfirm:o})]})}const ts={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function as({employee:u}){const l=M(),{t:r,i18n:m}=T(),{isModalAdd:x,isConfirm:t}=L(p=>p.salaire),o=new Date,h=ce({amount:se().required(r(s.paiment.amountRequired)),employee:se().required(r(s.salaire.employeeRequired))}),n=de({initialValues:{amount:0,observation:null,employee:"",date:new Date,month:null,year:null},validationSchema:h,onSubmit:async(p,{resetForm:c,setErrors:S})=>{const R={...p};R.date=ie(p.date).format("YYYY-MM-DD"),K.post("/employeewage/add/",R).then(O=>{l(i.actions.addSalaire(O.data)),l(i.actions.openCloseModalAdd()),l(i.actions.openCloseConfirm()),y.success(r(s.salaire.toastAddSuccess)),c()}).catch(O=>{console.log(O),l(i.actions.openCloseConfirm()),y.error(r(s.global.toastError))})}}),a=async p=>{p.preventDefault();const c=await n.validateForm();Object.keys(c).length===0?l(i.actions.openCloseConfirm()):await n.submitForm()},b=()=>{n.handleSubmit()};return e.jsxs(e.Fragment,{children:[e.jsx(J,{open:x,onClose:()=>l(i.actions.openCloseModalAdd()),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(q,{sx:ts,children:[e.jsxs(H,{direction:"row",justifyContent:"space-between",alignItems:"center",style:{marginBottom:"20px"},children:[e.jsx(ae,{id:"modal-modal-title",variant:"h6",component:"h2",children:r(s.salaire.addTitle)}),e.jsx("div",{className:"cursor-pointer",onClick:()=>l(i.actions.openCloseModalAdd()),children:e.jsx(X,{})})]}),e.jsxs("form",{noValidate:!0,onSubmit:p=>a(p),children:[e.jsx(ee,{id:"outlined-basic",label:r(s.paiment.amount),variant:"outlined",onBlur:n.handleBlur,fullWidth:!0,type:"number",name:"amount",onChange:n.handleChange,value:n.values.amount,error:!!(n.touched.amount&&n.errors.amount),helperText:n.touched.amount&&n.errors.amount,style:{marginBottom:"15px"}}),e.jsx(ee,{id:"outlined-basic",label:r(s.salaire.observation),variant:"outlined",onBlur:n.handleBlur,fullWidth:!0,multiline:!0,maxRows:4,name:"observation",onChange:n.handleChange,value:n.values.observation,error:!!(n.touched.observation&&n.errors.observation),helperText:n.touched.observation&&n.errors.observation,style:{marginBottom:"15px"}}),e.jsxs(A,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(n.touched.employee&&n.errors.employee),children:[e.jsx(_,{id:"batiment-id",error:!!(n.touched.employee&&n.errors.employee),children:r(s.employee.title)}),e.jsx(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"employee",onChange:n.handleChange,value:n.values.employee,label:r(s.employee.title),error:!!(n.touched.employee&&n.errors.employee),children:u.length>0?u.map(p=>e.jsxs(C,{value:p.id,children:[p.first_name," ",p.last_name]})):e.jsx(C,{children:r(s.batiment.nothingToDisplay)})}),n.touched.employee&&n.errors.employee&&e.jsx(V,{children:n.errors.employee})]}),e.jsx(te,{label:r(s.entrer.date),value:n.values.date,onChange:p=>n.setFieldValue("date",p),onBlur:n.handleBlur,name:"date",sx:{width:"100%"}}),e.jsx(D,{xs:12,mt:.8,mb:.9,children:e.jsx(_,{children:r(s.salaire.periode)})}),e.jsxs(D,{container:!0,spacing:2,children:[e.jsx(D,{item:!0,xs:6,children:e.jsxs(A,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(n.touched.type&&n.errors.type),children:[e.jsx(_,{id:"batiment-id",children:r(s.salaire.month)}),e.jsx(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"month",onChange:n.handleChange,value:n.values.month,label:r(s.salaire.month),children:[...Array(12)].map((p,c)=>e.jsx(C,{value:c+1,children:c+1}))}),n.touched.month&&n.errors.month&&e.jsx(V,{children:n.errors.month})]})}),e.jsx(D,{item:!0,xs:6,children:e.jsxs(A,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(n.touched.type&&n.errors.type),children:[e.jsx(_,{id:"batiment-id",children:r(s.salaire.year)}),e.jsxs(U,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"year",onChange:n.handleChange,value:n.values.year,label:r(s.salaire.year),children:[e.jsx(C,{value:o.getFullYear()-1,children:o.getFullYear()-1}),e.jsx(C,{value:o.getFullYear(),children:o.getFullYear()}),e.jsx(C,{value:o.getFullYear()+1,children:o.getFullYear()+1}),e.jsx(C,{value:o.getFullYear()+2,children:o.getFullYear()+2})]}),n.touched.year&&n.errors.year&&e.jsx(V,{children:n.errors.year})]})})]}),e.jsx($,{fullWidth:!0,size:"large",sx:{mt:2},type:"submit",variant:"contained",children:r(s.global.ajouter)})]})]})}),e.jsx(ye,{confirmed:b,cancel:()=>l(i.actions.openCloseConfirm()),isConfirm:t})]})}function ns(){const{currentData:u,isModalDelete:l}=L(o=>o.salaire),r=M(),{t:m,i18n:x}=T(),t=()=>{K.delete(`/employeewage/delete/${u.id}`).then(o=>{r(i.actions.deleteSalaire()),r(i.actions.openCloseModalDelete()),y.success(m(s.salaire.toastDeleteSuccess))}).catch(o=>{r(i.actions.openCloseModalDelete()),y.error(m(s.global.toastError))})};return e.jsx(J,{open:l,onClose:()=>r(i.actions.openCloseModalDelete()),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:e.jsx(De,{title:m(s.salaire.deletetitle),message:m(s.salaire.deleteMessage),deleteFn:t,cancel:()=>r(i.actions.openCloseModalDelete())})})}function rs(){const{currentData:u,isModalDeleteProof:l}=L(o=>o.salaire),r=M(),{t:m,i18n:x}=T(),t=()=>{K.delete(`/employeewage/proof/delete/${u.idFile}`).then(o=>{r(i.actions.deleteSalaireProof()),r(i.actions.openCloseConfirmDeleteProof()),y.success(m(s.global.toastSuccessDeleteFile))}).catch(o=>{console.log(o),r(i.actions.openCloseConfirmDeleteProof()),y.error(m(s.global.toastError))})};return e.jsx(J,{open:l,onClose:()=>r(i.actions.openCloseConfirmDeleteProof()),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:e.jsx(De,{title:m(s.paiment.deleteTitleFile),message:m(s.paiment.deleteDescriptionFile),deleteFn:t,cancel:()=>r(i.actions.openCloseConfirmDeleteProof())})})}function os(){const{isModalAdd:u,isModalUpdate:l}=L(m=>m.salaire),r=oe("employee",le.fetchOeuvreList);return e.jsxs(q,{component:"main",sx:{flexGrow:1,p:3},children:[e.jsx(fe,{children:e.jsx(Qe,{})}),u&&e.jsx(as,{employee:r.data}),l&&e.jsx(ss,{employee:r.data}),e.jsx(ns,{}),e.jsx(rs,{})]})}function fs(){return e.jsx(e.Fragment,{children:e.jsx(fe,{children:e.jsx(os,{})})})}export{fs as default};
