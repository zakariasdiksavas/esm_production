import{r as q,aa as O,d as $,l as t,j as e,B as me,ab as pe,aG as xe,a9 as se,bp as u,a2 as X,h as V,aj as v,ak as C,al as S,am as b,a as U,ae as Y,T as Z,aA as ae,a5 as R,af as ee,F as I,k as H,S as ge}from"./index-5b79c039.js";import{e as je,T as be,a as fe,b as K,c as x,d as ye,f as A,G as h,u as z,S as L,h as P,B as te,E as le}from"./moment-864131f4.js";import{E as ve,P as Ce,M as Se}from"./ModalDelete-04bd8acd.js";import{T as Be,C as oe}from"./TableRowsLoader-23cb4167.js";import{A as Te}from"./AlertError-96b329d4.js";import{D as we}from"./Delete-951034da.js";import{u as re,c as ie,e as J,C as de,b as qe,a as N,d as Q}from"./formik.esm-f8b1f355.js";import"./fr-4efeb1d7.js";import{C as De}from"./CardActions-a1a436e4.js";import{D as ne}from"./DatePicker-9add668e.js";import{M as ce}from"./ModalConfirm-575c2085.js";import{D as ue}from"./DateTimePicker-2dfbc613.js";import"./Tabs-0c73418c.js";const Me=q.memo(p=>{const f=JSON.parse(sessionStorage.getItem("user")),m=O();let{count:y=0,items:j=[],onDeselectAll:a,onDeselectOne:i,onSelectAll:F,onSelectOne:g,selected:n=[],isLoading:l,isError:M}=p;const[k,w]=q.useState(1),[B,D]=q.useState(25),{t:r,i18n:G}=$(),s=[r(t.sortie.vente),r(t.sortie.gratuit),r(t.sortie.accident),r(t.sortie.change)],o=q.useRef(null),E=c=>{V.put("/outbound/delivered/",{id:c}).then(W=>{m(u.actions.setDeliver(W.data.id))})},d=()=>{const c=o.current;c&&c.scrollHeight===c.scrollTop+c.clientHeight&&!l&&w(_=>_+1)};q.useEffect(()=>(o.current&&o.current.addEventListener("scroll",d),()=>{o.current&&o.current.removeEventListener("scroll",d)}),[l]);const T=j==null?void 0:j.slice(0,k*B);return q.useEffect(()=>{w(1)},[j]),e.jsxs(me,{sx:{position:"relative"},children:[e.jsx(je,{component:pe,sx:{maxHeight:"60vh"},ref:o,children:e.jsxs(be,{sx:{minWidth:700},children:[e.jsx(fe,{children:e.jsxs(K,{children:[e.jsx(x,{children:r(t.client.title)}),e.jsx(x,{children:f!=null&&f.is_eleveur?r(t.batiment.title):r(t.fournisseur.title)}),e.jsx(x,{children:r(t.magazin.title)}),e.jsx(x,{children:r(t.sortie.eggType)}),e.jsx(x,{children:r(t.entrer.quantity)}),e.jsx(x,{children:r(t.sortie.typeDeSortie)}),e.jsxs(x,{children:[r(t.entrer.prix)," ",r(t.global.mad)]}),e.jsx(x,{children:r(t.entrer.date)}),e.jsx(x,{children:r(t.entrer.temps)}),e.jsx(x,{children:r(t.sortie.status)}),e.jsx(x,{})]})}),l?e.jsx(Be,{rowsNum:10,cellNum:10}):e.jsx(ye,{children:(T==null?void 0:T.length)>0?T==null?void 0:T.map(c=>{let W=new Date(c.date),_={year:W.getFullYear(),month:`${W.getMonth()+1}`,day:`${W.getDate()}`};const he=new Intl.NumberFormat("en-US",{style:"currency",currency:"MAD"});return e.jsxs(K,{hover:!0,children:[e.jsxs(x,{children:[c.client_first_name," ",c.client_last_name]}),e.jsxs(x,{children:[c.eggsource_name," ",c.eggsource_lastname]}),e.jsx(x,{children:c.warehouse_name}),e.jsx(x,{children:c.eggclass_name}),e.jsx(x,{sx:{direction:"initial",whiteSpace:"nowrap"},children:c.quantity.toLocaleString("en-US").replaceAll(","," ")}),e.jsx(x,{children:s[c.type-1]}),e.jsx(x,{children:he.format(c.price).replaceAll(","," ").replace("MAD","")}),e.jsxs(x,{children:[_.day.padStart(2,0),"/",_.month.padStart(2,0),"/",_.year]}),e.jsx(x,{children:c.time.substring(0,5)}),e.jsxs(x,{children:[" ",e.jsx(xe,{onClick:()=>E(c.id),label:c.is_delivered?r(t.sortie.oui):r(t.sortie.non),color:c.is_delivered?"success":"error"})]}),e.jsxs(x,{children:[e.jsx(se,{color:"warning",onClick:()=>{m(u.actions.setCurrentData(c)),m(u.actions.openCloseModalUpdate())},children:e.jsx(X,{children:e.jsx(ve,{})})}),e.jsx(se,{color:"error",onClick:()=>{m(u.actions.setCurrentData(c)),m(u.actions.openCloseModalDelete())},children:e.jsx(X,{children:e.jsx(we,{})})})]})]},c.id)}):e.jsx(K,{children:e.jsx(x,{colSpan:11,sx:{textAlign:"center"},children:r(t.batiment.nothingToDisplay)})})})]})}),M&&e.jsx(Te,{})]})});function We({batiment:p,magazin:f,classList:m,typeList:y,clientList:j}){A.locale("fr");const{t:a,i18n:i}=$(),F=O(),g=JSON.parse(sessionStorage.getItem("user")),n=re({initialValues:{date1:null,date2:null,type:"",client:"",warehouse:"",option:"",eggsource:""},validationSchema:ie({date1:J().nullable().test("is-before-date2",a(t.global.date2Greather),function(l){const{date2:M}=this.parent;return l<=M}),date2:J().nullable().test("is-after-date1",a(t.global.date2Greather),function(l){const{date1:M}=this.parent;return l>=M})}),onSubmit:async(l,{resetForm:M,setErrors:k})=>{let w="";for(let B in l)if(l[B]!==""&&l[B]!==null){let D=new Date(l[B]),r=D.getFullYear()!==1970?`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`:l[B];w==""?w+=`?${B}=${r}`:w+=`&${B}=${r}`}if(l.date1!==null&&l.date2==null){k({date2:a(t.global.date2Required)});return}else if(l.date1==null&&l.date2!==null){k({date1:a(t.global.date1Required)});return}V.get("/outbound/list/"+w).then(B=>{F(u.actions.fetchSortie(B.data))})},onReset:()=>{V.get("/outbound/list/").then(l=>{F(u.actions.fetchSortie(l.data))})}});return e.jsx(de,{children:e.jsx(qe,{children:e.jsxs("form",{noValidate:!0,onSubmit:n.handleSubmit,onReset:n.handleReset,children:[e.jsxs(h,{container:!0,gap:2,children:[e.jsx(h,{item:!0,xs:12,sm:5,md:2,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,children:[e.jsx(C,{id:"batiment-id",size:"small",children:g!=null&&g.is_eleveur?a(t.batiment.Nom):a(t.fournisseur.Nom)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"eggsource",size:"small",onChange:n.handleChange,value:n.values.eggsource,label:g!=null&&g.is_eleveur?a(t.batiment.Nom):a(t.fournisseur.Nom),children:p==null?void 0:p.map(l=>e.jsxs(b,{value:l.id,children:[l.name," ",l.last_name]}))})]})}),e.jsx(h,{items:!0,xs:12,sm:5,md:2,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,children:[e.jsx(C,{id:"batiment-id",size:"small",children:a(t.magazin.Nom)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"warehouse",size:"small",onChange:n.handleChange,value:n.values.warehouse,label:a(t.batiment.Nom),children:f==null?void 0:f.map(l=>e.jsx(b,{value:l.id,children:l.name}))})]})}),e.jsx(h,{items:!0,xs:12,sm:5,md:2,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,children:[e.jsx(C,{id:"batiment-id",size:"small",children:a(t.client.title)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,size:"small",name:"client",onChange:n.handleChange,value:n.values.client,label:"Type de payment",children:j==null?void 0:j.map(l=>e.jsxs(b,{value:l.id,children:[l.first_name," ",l.last_name]}))})]})}),e.jsx(h,{item:!0,xs:12,sm:5,md:2,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(n.touched.option&&n.errors.option),children:[e.jsx(C,{id:"batiment-id",size:"small",children:a(t.sortie.eggType)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,size:"small",name:"option",onChange:n.handleChange,value:n.values.option,label:a(t.sortie.eggType),children:m==null?void 0:m.map(l=>e.jsx(b,{value:l.id,children:l.value}))})]})}),e.jsx(h,{item:!0,xs:12,sm:5,md:2,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,children:[e.jsx(C,{id:"batiment-id",size:"small",children:a(t.sortie.typeDeSortie)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:n.handleBlur,fullWidth:!0,name:"type",size:"small",onChange:n.handleChange,value:n.values.type,label:a(t.sortie.typeDeSortie),children:y==null?void 0:y.map(l=>e.jsx(b,{value:l.id,children:l.value}))})]})}),e.jsx(h,{item:!0,xs:12,sm:5,md:2,children:e.jsx(ne,{value:n.values.date1,onChange:l=>n.setFieldValue("date1",l),onBlur:n.handleBlur,label:a(t.global.date1),name:"date1",sx:{width:"100%"},slotProps:{textField:{variant:"outlined",size:"small",error:!!(n.touched.date1&&n.errors.date1),helperText:n.touched.date1&&n.errors.date1}}})}),e.jsx(h,{item:!0,xs:12,sm:5,md:2,children:e.jsx(ne,{value:n.values.date2,onChange:l=>n.setFieldValue("date2",l),onBlur:n.handleBlur,label:a(t.global.date2),name:"date2",sx:{width:"100%"},slotProps:{textField:{variant:"outlined",size:"small",error:!!(n.touched.date2&&n.errors.date2),helperText:n.touched.date2&&n.errors.date2}}})}),e.jsx(h,{item:!0,xs:7,children:e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(U,{variant:"contained",type:"reset",children:a(t.global.reset)}),e.jsx(U,{type:"submit",variant:"contained",children:a(t.global.filter)})]})})]}),e.jsx(De,{children:e.jsx("div",{className:"flex justify-end w-full"})})]})})})}function _e({batiment:p,magazin:f,classList:m,typeList:y,clientList:j}){const a=O(),{t:i,i18n:F}=$(),{sortie:g}=Y(l=>l.sortie),n=z("sortie",P.getSortie);return q.useEffect(()=>{n.status=="success"&&a(u.actions.fetchSortie(n.data))},[n.status]),e.jsxs(L,{spacing:4,children:[e.jsxs(L,{direction:"row",justifyContent:"space-between",spacing:4,children:[e.jsx(L,{spacing:1,children:e.jsx(Z,{variant:"h4",children:i(t.sortie.title)})}),e.jsx(L,{alignItems:"center",direction:"row",spacing:3,children:e.jsx(U,{startIcon:e.jsx(X,{children:e.jsx(Ce,{})}),variant:"contained",onClick:()=>a(u.actions.openCloseModalAdd()),children:i(t.global.ajouter)})})]}),e.jsxs(de,{children:[e.jsx(We,{batiment:p,magazin:f,classList:m,typeList:y,clientList:j}),e.jsx(Me,{items:g,isLoading:n.isLoading,isError:n.isError,count:g.length,rowsPerPage:25})]})]})}const Ie=p=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:400,height:"auto",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,[p.breakpoints.down("md")]:{width:"95%",height:"90vh",overflow:"auto"}}),Ne=({batiment:p,magazin:f,classList:m,typeList:y,clientList:j})=>{A.locale("fr");const a=O(),{t:i,i18n:F}=$(),g=JSON.parse(sessionStorage.getItem("user")),{currentData:n,isModalUpdate:l,isConfirm:M}=Y(o=>o.sortie),[k,w]=q.useState(),B=ae(),D=ie({dateTime:J().required(i(t.sortie.dateTimeRequired)),eggsource:N().required(g!=null&&g.is_eleveur?i(t.sortie.batimentRequired):i(t.sortie.fournisseurRequired)),warehouse:N().required(i(t.sortie.magazinRequired)),option:N().required(i(t.sortie.optionRequired)),type:N().required(i(t.sortie.typeRequired)),client:N().required(i(t.sortie.clientRequired)),price:Q().required(i(t.sortie.prixRequired)),quantity:Q().required(i(t.sortie.quantityRequired))}),r=re({initialValues:{dateTime:"",type:"",client:"",warehouse:"",option:"",eggsource:"",price:0,quantity:0},validationSchema:D,onSubmit:async(o,{resetForm:E,setErrors:d})=>{console.log(o);let T={...o};T.date=A(k).format("YYYY-MM-DD"),T.time=A(k).format("LT").replace(" AM","").replace(" PM",""),V.put("/outbound/update/",T).then(c=>{a(u.actions.editSortie(c.data)),a(u.actions.openCloseModalUpdate()),a(u.actions.openCloseConfirm()),R.success(i(t.sortie.toastUpdateSuccess)),E()}).catch(c=>{if(a(u.actions.openCloseConfirm()),c.response.data==2){R.error(i(t.sortie.outOfStock));return}else c.response.data==1?R.error(i(t.sortie.noStockExist)):R.error(i(t.sortie.toastError))})}}),G=async o=>{o.preventDefault();const E=await r.validateForm();Object.keys(E).length===0?a(u.actions.openCloseConfirm()):await r.submitForm()},s=()=>{r.handleSubmit()};return q.useEffect(()=>{r.setValues(n),w(new Date(`${n.date}T${n.time}`)),r.setFieldValue("dateTime",new Date,!1)},[n]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{open:l,onClose:()=>a(u.actions.openCloseModalUpdate()),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(te,{sx:Ie(B),children:[e.jsxs(L,{direction:"row",justifyContent:"space-between",alignItems:"center",style:{marginBottom:"20px"},children:[e.jsx(Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:i(t.sortie.update)}),e.jsx("div",{className:"cursor-pointer",onClick:()=>a(u.actions.openCloseModalUpdate()),children:e.jsx(oe,{})})]}),e.jsxs("form",{noValidate:!0,onSubmit:o=>G(o),children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.eggsource&&r.errors.eggsource),children:[e.jsx(C,{id:"batiment-id",children:g!=null&&g.is_eleveur?i(t.batiment.Nom):i(t.fournisseur.Nom)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"eggsource",onChange:r.handleChange,value:r.values.eggsource,label:g!=null&&g.is_eleveur?i(t.batiment.Nom):i(t.fournisseur.Nom),children:p.length>0?p.map(o=>e.jsxs(b,{value:o.id,children:[o.name," ",o.last_name]})):e.jsx(b,{children:i(t.batiment.nothingToDisplay)})}),r.touched.eggsource&&r.errors.eggsource&&e.jsx(I,{children:r.errors.eggsource})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.warehouse&&r.errors.warehouse),children:[e.jsx(C,{id:"batiment-id",children:i(t.magazin.Nom)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"warehouse",onChange:r.handleChange,value:r.values.warehouse,label:i(t.batiment.Nom),children:f.length>0?f.map(o=>e.jsx(b,{value:o.id,children:o.name})):e.jsx(b,{children:i(t.batiment.nothingToDisplay)})}),r.touched.warehouse&&r.errors.warehouse&&e.jsx(I,{children:r.errors.warehouse})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.client&&r.errors.client),children:[e.jsx(C,{id:"batiment-id",children:i(t.client.title)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"client",onChange:r.handleChange,value:r.values.client,label:i(t.client.title),children:j.length>0?j.map(o=>e.jsxs(b,{value:o.id,children:[o.first_name," ",o.last_name]})):e.jsx(b,{children:i(t.batiment.nothingToDisplay)})}),r.touched.client&&r.errors.client&&e.jsx(I,{children:r.errors.client})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.option&&r.errors.option),children:[e.jsx(C,{id:"batiment-id",children:i(t.sortie.eggType)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"option",onChange:r.handleChange,value:r.values.option,label:i(t.sortie.eggType),children:m.map(o=>e.jsx(b,{value:o.id,children:o.value}))}),r.touched.option&&r.errors.option&&e.jsx(I,{children:r.errors.option})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(r.touched.type&&r.errors.type),children:[e.jsx(C,{id:"batiment-id",children:i(t.sortie.typeDeSortie)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:r.handleBlur,fullWidth:!0,name:"type",onChange:r.handleChange,value:r.values.type,label:i(t.sortie.typeDeSortie),children:y.map(o=>e.jsx(b,{value:o.id,children:o.value}))}),r.touched.type&&r.errors.type&&e.jsx(I,{children:r.errors.type})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(H,{id:"outlined-basic",label:i(t.entrer.quantity),variant:"outlined",fullWidth:!0,type:"number",onBlur:r.handleBlur,onChange:r.handleChange,value:r.values.quantity,error:!!(r.touched.quantity&&r.errors.quantity),helperText:r.touched.quantity&&r.errors.quantity,name:"quantity",style:{marginBottom:"15px"}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(H,{id:"outlined-basic",label:i(t.entrer.prix),variant:"outlined",fullWidth:!0,type:"number",onBlur:r.handleBlur,onChange:r.handleChange,value:r.values.price,error:!!(r.touched.price&&r.errors.price),helperText:r.touched.price&&r.errors.price,name:"price",style:{marginBottom:"15px"}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(ue,{id:"outlined-basic",label:i(t.entrer.temps)+" "+i(t.entrer.date),variant:"outlined",onBlur:r.handleBlur,fullWidth:!0,name:"dateTime",value:k,onChange:o=>{r.setFieldValue("dateTime",o,!0),w(o)},slotProps:{textField:{variant:"outlined",error:!!(r.touched.dateTime&&r.errors.dateTime),helperText:!!(r.touched.dateTime&&r.errors.dateTime)}},sx:{marginBottom:"15px",width:"100%"}})})]}),e.jsx(U,{fullWidth:!0,size:"large",sx:{mt:2},type:"submit",variant:"contained",children:i(t.global.modifier)})]})]})}),e.jsx(ce,{confirmed:s,cancel:()=>a(u.actions.openCloseConfirm()),isConfirm:M})]})},Re=Ne,ke=p=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:600,height:"auto",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,[p.breakpoints.down("md")]:{width:"95%",height:"90vh",overflow:"auto"}}),Fe=({batiment:p,magazin:f,classList:m,typeList:y,clientList:j})=>{A.locale("fr");const a=O(),{t:i,i18n:F}=$(),g=ae(),n=JSON.parse(sessionStorage.getItem("user")),[l,M]=q.useState(0),{sortie:k,isModalAdd:w,isConfirm:B}=Y(d=>d.sortie),[D,r]=q.useState(),G=ie({dateTime:J().required(i(t.sortie.dateTimeRequired)),eggsource:N().required(n!=null&&n.is_eleveur?i(t.sortie.batimentRequired):i(t.sortie.fournisseurRequired)),warehouse:N().required(i(t.sortie.magazinRequired)),option:N().required(i(t.sortie.optionRequired)),type:N().required(i(t.sortie.typeRequired)),client:N().required(i(t.sortie.clientRequired)),price:Q().required(i(t.sortie.prixRequired)),quantity:Q().required(i(t.sortie.quantityRequired))}),s=re({initialValues:{dateTime:"",type:"",client:"",warehouse:"",option:"",eggsource:"",price:0,quantity:0},validationSchema:G,onSubmit:async(d,{resetForm:T,setErrors:c})=>{let W={...d};W.date=A(D).format("YYYY-MM-DD"),W.time=A(D).format("LT").replace(" AM","").replace(" PM",""),V.post("/outbound/add/",W).then(_=>{a(u.actions.addSortie(_.data)),a(u.actions.openCloseModalAdd()),a(u.actions.openCloseConfirm()),R.success(i(t.sortie.toastAddSuccess)),T()}).catch(_=>{if(a(u.actions.openCloseConfirm()),_.response.data==2){R.error(i(t.sortie.outOfStock));return}else _.response.data==1?R.error(i(t.sortie.noStockExist)):R.error(i(t.sortie.toastError))})}}),o=async d=>{d.preventDefault();const T=await s.validateForm();Object.keys(T).length===0?a(u.actions.openCloseConfirm()):await s.submitForm()},E=()=>{s.handleSubmit()};return q.useEffect(()=>{M(s.values.price*s.values.quantity)},[s.values.price,s.values.quantity]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{open:w,onClose:()=>a(u.actions.openCloseModalAdd()),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(te,{sx:ke(g),children:[e.jsxs(L,{direction:"row",justifyContent:"space-between",alignItems:"center",style:{marginBottom:"20px"},children:[e.jsx(Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:i(t.sortie.add)}),e.jsx("div",{className:"cursor-pointer",onClick:()=>a(u.actions.openCloseModalAdd()),children:e.jsx(oe,{})})]}),e.jsxs("form",{noValidate:!0,onSubmit:d=>o(d),children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(s.touched.eggsource&&s.errors.eggsource),children:[e.jsx(C,{id:"batiment-id",children:n!=null&&n.is_eleveur?i(t.batiment.Nom):i(t.fournisseur.Nom)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:s.handleBlur,fullWidth:!0,name:"eggsource",onChange:s.handleChange,value:s.values.eggsource,label:n!=null&&n.is_eleveur?i(t.batiment.Nom):i(t.fournisseur.Nom),children:p.length>0?p.map(d=>e.jsxs(b,{value:d.id,children:[d.name," ",d.last_name]})):e.jsx(b,{children:i(t.batiment.nothingToDisplay)})}),s.touched.eggsource&&s.errors.eggsource&&e.jsx(I,{children:s.errors.eggsource})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(s.touched.warehouse&&s.errors.warehouse),children:[e.jsx(C,{id:"batiment-id",children:i(t.magazin.Nom)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:s.handleBlur,fullWidth:!0,name:"warehouse",onChange:s.handleChange,value:s.values.warehouse,label:i(t.batiment.Nom),children:f.length>0?f.map(d=>e.jsx(b,{value:d.id,children:d.name})):e.jsx(b,{children:i(t.batiment.nothingToDisplay)})}),s.touched.warehouse&&s.errors.warehouse&&e.jsx(I,{children:s.errors.warehouse})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(s.touched.client&&s.errors.client),children:[e.jsx(C,{id:"batiment-id",children:i(t.client.title)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:s.handleBlur,fullWidth:!0,name:"client",onChange:s.handleChange,value:s.values.client,label:i(t.client.title),children:j.length>0?j.map(d=>e.jsxs(b,{value:d.id,children:[d.first_name," ",d.last_name]})):e.jsx(b,{children:i(t.batiment.nothingToDisplay)})}),s.touched.client&&s.errors.client&&e.jsx(I,{children:s.errors.client})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(s.touched.option&&s.errors.option),children:[e.jsx(C,{id:"batiment-id",children:i(t.sortie.eggType)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:s.handleBlur,fullWidth:!0,name:"option",onChange:s.handleChange,value:s.values.option,label:i(t.sortie.eggType),children:m.map(d=>e.jsx(b,{value:d.id,children:d.value}))}),s.touched.option&&s.errors.option&&e.jsx(I,{children:s.errors.option})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(v,{style:{marginBottom:"15px"},fullWidth:!0,error:!!(s.touched.type&&s.errors.type),children:[e.jsx(C,{id:"batiment-id",children:i(t.sortie.typeDeSortie)}),e.jsx(S,{labelId:"batiment-id",id:"demo-simple-select",onBlur:s.handleBlur,fullWidth:!0,name:"type",onChange:s.handleChange,value:s.values.type,label:i(t.sortie.typeDeSortie),children:y.map(d=>e.jsx(b,{value:d.id,children:d.value}))}),s.touched.type&&s.errors.type&&e.jsx(I,{children:s.errors.type})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(H,{id:"outlined-basic",label:i(t.entrer.quantity),variant:"outlined",fullWidth:!0,type:"number",onBlur:s.handleBlur,onChange:s.handleChange,value:s.values.quantity,error:!!(s.touched.quantity&&s.errors.quantity),helperText:s.touched.quantity&&s.errors.quantity,name:"quantity",style:{marginBottom:"15px"}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(H,{id:"outlined-basic",label:i(t.entrer.prix),variant:"outlined",fullWidth:!0,type:"number",onBlur:s.handleBlur,onChange:s.handleChange,value:s.values.price,error:!!(s.touched.price&&s.errors.price),helperText:s.touched.price&&s.errors.price,name:"price",style:{marginBottom:"15px"}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(ue,{id:"outlined-basic",label:i(t.entrer.temps)+" "+i(t.entrer.date),variant:"outlined",onBlur:s.handleBlur,fullWidth:!0,name:"dateTime",value:D,onChange:d=>{s.setFieldValue("dateTime",d,!0),r(d)},slotProps:{textField:{variant:"outlined",error:!!(s.touched.dateTime&&s.errors.dateTime),helperText:!!(s.touched.dateTime&&s.errors.dateTime)}},sx:{marginBottom:"15px",width:"100%"}})}),e.jsx(h,{xs:12,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Montant a payer: "}),l]})})]}),e.jsx(U,{fullWidth:!0,size:"large",sx:{mt:2},type:"submit",variant:"contained",children:i(t.global.ajouter)})]})]})}),e.jsx(ce,{confirmed:E,cancel:()=>a(u.actions.openCloseConfirm()),isConfirm:B})]})},Ee=Fe;function Ae(){const{currentData:p,isModalDelete:f}=Y(i=>i.sortie),m=O(),{t:y,i18n:j}=$();JSON.parse(sessionStorage.getItem("user"));const a=()=>{V.delete(`/outbound/delete/${p.id}`).then(i=>{m(u.actions.deleteSortie()),m(u.actions.openCloseModalDelete()),R.success(y(t.sortie.toastDeleteSuccess))}).catch(i=>{m(u.actions.openCloseModalDelete()),R.error(y(t.sortie.toastError))})};return e.jsx(ee,{open:f,onClose:()=>m(u.actions.openCloseModalDelete()),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:e.jsx(Se,{title:y(t.sortie.deleteTitle),message:y(t.sortie.deleteDescription),deleteFn:a,cancel:()=>m(u.actions.openCloseModalDelete())})})}function $e(){const{isModalAdd:p,isModalUpdate:f}=Y(F=>F.sortie),m=z("batimens",P.getBatimentSelect),y=z("magazins",P.getWarehouseSelect),j=z("classLists",P.getClass),a=z("typeList",P.typeLists),i=z("clientLists",P.getClientSelect);return e.jsxs(te,{component:"main",sx:{flexGrow:1,p:3},children:[e.jsx(le,{children:e.jsx(_e,{batiment:m.data,magazin:y.data,classList:j.data,typeList:a.data,clientList:i.data})}),p&&e.jsx(Ee,{batiment:m.data,magazin:y.data,classList:j.data,typeList:a.data,clientList:i.data}),f&&e.jsx(Re,{batiment:m.data,magazin:y.data,classList:j.data,typeList:a.data,clientList:i.data}),e.jsx(Ae,{})]})}function Ze(){const{t:p,i18n:f}=$();return e.jsxs(e.Fragment,{children:[e.jsx(ge,{title:`ESM | ${p(t.nav.sortie)}`}),e.jsx(le,{children:e.jsx($e,{})})]})}export{Ze as default};
